<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset=UTF-8>
	<meta name="robots" content="noindex, nofollow">
    <title>contents</title>   
<style>
html,body{font-size:9pt}
body{margin-left:10px;font-family: Comic Sans MS,Microsoft YaHei,serif,sans-serif}
a:not(.w):link{text-decoration:none;color:blue}
a:not(.w):visited{text-decoration:none;color:blue}
a:not(.w):active{text-decoration:underline;color:blue}
a:not(.w):hover{text-decoration:underline;}
li a{display:block}
.w{margin:0 0 0 2px;color:blue;text-decoration:none;}
.external_link_icon{background:url(../css/img/external.png) no-repeat scroll right;padding-right:14px}
.pdf{background:url(../css/img/pdf.ico) no-repeat scroll right;padding-right: 16px; background-size: 12px 14px;}
.tool{display: inline;background:url(../css/img/tool.ico) no-repeat scroll right;padding-right: 16px; background-size: 12px 14px;}
ul{list-style-type:none;padding-left:25px;padding-bottom:5px}
.x{display:block;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.x::before{content:"\25B6";color:gray;display:inline-block;margin-right:3px;font-size:70%}
.x:hover{font-weight:bold;background-color:whitesmoke}
.x-down::before{-ms-transform:rotate(90deg);-webkit-transform:rotate(90deg);transform:rotate(90deg)}
.y{display:none}
.active{display:block}
#v{margin:10px 0 100px 0;padding:0}
#v li{margin: 2px 0!important;}
.al{font-size:8pt;top:4px;left:20px;cursor:pointer;padding-right: 5px;}
.p {display:inline}
#sBar{margin-top:10px}
.sR{display:none}
.sR1{color:red;cursor: pointer;padding: 3px;vertical-align: top;}
#tre{position: absolute; left: 205px; color: plum;cursor:pointer;display:none;}
#te{color: darkgrey;cursor:default;}
#gotop{font-size:20px;display:none;position:fixed;top:40%;right:10px;z-index:99;border:none;outline:none;background-color:gainsboro;color:white;cursor:pointer;padding:5px}
#gotop:hover{background-color:#bbb}
</style>
	
</head>
<body>
<span class="al">
    <a href="index.html" class="w" target="mainframe">大醉虾</a>
</span>

<form id="sBar" method="post" action="" onSubmit="bz();sR();SearchIt();return false;">
	<div>
		<input style="width:170px" type="text" id="keyword" placeholder=" " onClick="this.select();" onpaste="fin()"><input type="submit" value="Find" onClick="bz();sR();SearchIt();return false;" style=" vertical-align: top; "><span class="sR1" onClick="sR1();zb()" title="收起">x</span>
	</div>
	<div id="sR" class="sR">
		<select style="border: .5px solid blue; width: 219px; " size="15" id="Result" onclick="Go();"></select>
	</div>
</form><br>
<ul id="v" onmouseover="s_tre()" onmouseout="h_tre()">
	<span id="tre" onclick="al()"> [+/-]</span><span id="te">[0h 00m]</span><br><br>
	<li><span class="x">影视剧</span>	
		<ul class="y">
			<li><a>喜剧之王</a></li>
			<li><a>变态假面</a></li>				
			<li><a>圆月弯刀</a></li>
			<li><a>武林外传</a></li>
			<li><a>看过的</a></li>							
			<li><span class="x">复述</span>
				<ul class="y">
					<li><a>大醉侠_17</a></li>
				</ul>				
			</li>
			<li><span class="x">誊写</span>
				<ul class="y">
				</ul>				
			</li>
		</ul>
	</li>
	<li><span class="x">切片</span>
		<ul class="y">
			<li><a>嫖客是怎样炼成的</a></li>
			<li><a>拜訪春天</a></li>
			<li><a>今天我的猫叫了一声</a></li>
			<li><a>你知道我们司令去哪儿了吗</a></li>
			<li><a>恶作剧</a></li>
			<li><a>李嘉诚和张子强经典对话</a></li>
			<li><a>《现代汉语词典》过滤</a></li>			
			<li><a>民谚</a></li>
			<li><a>undefined-1</a></li>
			<li><a>书摘-1</a></li>
		</ul>				
	</li>		
	<li><span class="x">游记</span>
		<ul class="y">
			<li><a>掠影（一）</a></li>
		</ul>	
	</li>		
	<li><span class="x">其它</span>
		<ul class="y">														
			<li><a>chrome插件集</a></li>	
			<li><a>支援列表</a></li>	
			<li><a>PC重置</a></li>
			<li><a>用户文件夹更名</a></li>
			<li><a>web搜索操作符</a></li>				
			<li><a>Apache24</a></li>										
			<li><a>git版控</a></li>								
			<li><a>批处理集</a></li>				
			<li><a>仿键盘按键</a></li>										
			<li><a class="p pdf" target="mainframe" href="../extra/PDF.js/web/viewer.html?file=../blank.pdf">PDF浏览器</a></li>										
		</ul>
	</li>
	<li><a class="p" href="https://github.com/wulingpo/dazuixia/commits/master">updates</a></li>
</ul>
<button onclick="topFunction()" id="gotop">^</button>


<script>
var x_url = window.location.href;
var x_index = x_url.lastIndexOf("\/");
x_str = x_url.substring(x_index + 1,x_url.length);
if ( x_str !='denied.html' && window.self === window.top) { 
    window.location='denied.html'; 
}
//折叠
var toggler = document.getElementsByClassName("x");
var i;
for (i = 0; i < toggler.length; i++) {
  toggler[i].addEventListener("click", function() {
    this.parentElement.querySelector(".y").classList.toggle("active");
    this.classList.toggle("x-down");
  });
};

var _tre = document.getElementById("tre");
function h_tre(){
_tre.style.display = 'none';
}
function s_tre(){
_tre.style.display = 'block';
}

var Flag1 = false;
function al() {
	var toggler = document.getElementsByClassName("x");
	var toggler2 = document.getElementsByClassName("y");
	Flag1 = !Flag1;
	if (Flag1) {
			for (i = 0; i < toggler2.length; i++) {
				toggler2[i].classList.remove("x-down");
				toggler2[i].classList.add("active");
			};
			for (i = 0; i < toggler.length; i++) {
				toggler[i].classList.remove("active");
				toggler[i].classList.add("x-down");
			};
	} else {
			for (i = 0; i < toggler.length; i++) {
				toggler[i].classList.remove("x-down");
				toggler[i].classList.add("active");
			};
			for (i = 0; i < toggler2.length; i++) {
				toggler2[i].classList.remove("active");
				toggler2[i].classList.add("x-down");
			};
	};
};

//当前位置
function a_hl() {
	var ele = document.querySelectorAll('#v a:not(.p)');
	for (var k=0; k<ele.length; k++) {
    	ele[k].setAttribute('id', (k+1)); 
		ele[k].addEventListener("click",function(e) {
			var arr = document.querySelectorAll('#v a:not(.p)');
			for (var i=0; i<arr.length; i++) {
				arr[i].style.backgroundColor = "white";
				arr[i].style.color = "blue";
				arr[i].classList.remove('heh');
			}
			e.target.style.backgroundColor = "#e8e8e8";
			e.target.classList.add('heh');
		});
	}
}

//链接补全，postMessage
var aTag_innerH = [];
var aTag = document.querySelectorAll('#v a:not(.p)');
for (var i = 0; i < aTag.length; i++) {
	aTag[i].setAttribute('target', 'mainframe');
	aTag[i].setAttribute('href', aTag[i].innerHTML + '.html');
	aTag_innerH.push(aTag[i].innerHTML);
};
function zb(){
top.postMessage(''+aTag_innerH,'*');
}
function bz(){
var bz = document.getElementById("keyword").value;
top.postMessage(bz,'*');
}

//patch
var fs = document.getElementsByTagName("a");
var f;
for (f = 0; f < fs.length; f++) {
  fs[f].addEventListener("click", function() {
    zb();
  });
};

//站外链接
function target_blank() {
	var anchors = document.querySelectorAll("a[href^='http']:not(._top)");
	for (var l = 0; l < anchors.length; l++) {
			anchors[l].setAttribute('target', '_blank');
			anchors[l].classList.add('external_link_icon');
	};
};



window.onload=function(){zb();a_hl();target_blank();}

//数组匹配
var words = new Array();
var rank = new Array();
function SearchIt() {
    function addToRanks(index, r) {
        var i;
        var n = 0;
        for (i = 0; i < rank.length; i++) {
            if (rank[i][0] == index) {
                rank[i][1] += r;
                return;
            }
        }
        n = rank.length;
        rank[n] = new Array();
        rank[n][0] = index;
        rank[n][1] = r;
    }
    var i, j;
    var tn, str;
    var forSearch = new Array();
    str = document.getElementById("keyword").value;
    var inquote = false;
    var tmp = "";
    words.length = 0;
    for (i = 0; i < str.length; i++) {
        if (inquote) {
            if (str.charAt(i) == '"') {
                if (tmp != "") {
                    words[words.length] = tmp;
                    tmp = "";
                }
                inquote = false;
            } else {
                tmp += str.charAt(i);
            }
        } else {
            if (str.charAt(i) == '"') {
                if (tmp != "") {
                    words[words.length] = tmp;
                    tmp = "";
                }
                inquote = true;
            } else if (str.charAt(i) == ' ') {
                if (tmp != "") {
                    words[words.length] = tmp;
                    tmp = "";
                }
            } else {
                tmp += str.charAt(i);
            }
        }
    }
    if (tmp != "") {
        words[words.length] = tmp;
        tmp = "";
    }
    document.getElementById("Result").options.length = 0;
    var rrank = 1;
    var RegExp_words = new Array();
    for (i = 0; i < words.length; i++) {
        RegExp_words[i] = new RegExp(words[i], "gi");
    }
    forSearch.length = 0;
    tn = contents.length / 3;
    for (i = 0; i <= tn - 1; i++) {
        forSearch[i] = i;
    }
    rank.length = 0;
    for (i = 0; i <= forSearch.length - 1; i++) {
        str = contents[forSearch[i] * 3 + 1];
        rrank = 1;
        for (j = 0; j < RegExp_words.length; j++) {
            r = str.match(RegExp_words[j]);
            if (r != null) {
                rrank *= (r.length + 1);
            }
        }
        if (rrank > 1) {
            addToRanks(forSearch[i], Math.round(Math.pow(rrank, 1 / RegExp_words.length) * 20));
        }
    }
    for (i = 0; i <= forSearch.length - 1; i++) {
        str = contents[forSearch[i] * 3];
        rrank = 1;
        for (j = 0; j < RegExp_words.length; j++) {
            r = str.match(RegExp_words[j]);
            if (r != null) {
                rrank *= (r.length + 1);
            }
        }
        if (rrank > 1) {
            addToRanks(forSearch[i], Math.round(Math.pow(rrank, 1 / RegExp_words.length)));
        }
    }
    if (rank.length > 0) {
        var t = new Array();
        for (i = 0; i <= rank.length - 2; i++) {
            for (j = 0; j <= rank.length - 2 - i; j++) {
                if (rank[j][1] < rank[j + 1][1]) {
                    t = rank[j];
                    rank[j] = rank[j + 1];
                    rank[j + 1] = t;
                }
            }
        }
        for (i = 0; i <= rank.length - 1; i++) {
            var bbb = rank[i][1]-1;
			var ccc = contents[rank[i][0] * 3 + 1];
            document.getElementById("Result").options[document.getElementById("Result").options.length] = new Option(ccc + " [" + bbb + "]", ccc);
            if (i == 0) {
                document.getElementById("Result").selectedIndex = 0;
            }
        }
    } else {
		document.getElementById("sR").classList.add('sR');
		zb();
        document.getElementById("keyword").value = "";
        document.getElementById("keyword").setAttribute('placeholder', '没有相关内容');
    }
}
function Go(){
	var i;
	var url = "";
	for(i=0;i<document.getElementById("Result").options.length;i++){
		 if(document.getElementById("Result").options[i].selected){
			url = document.getElementById("Result").options[i].value;
			break;
		 }
	}
	if(aTag_innerH.includes(url)){
		window.open(url + '.html','mainframe');
		bz();
	}
}
function sR(){
document.getElementById("sR").classList.remove('sR');
}
function sR1(){
document.getElementById("sR").classList.add('sR');
document.getElementById("keyword").value = "";
document.getElementById("keyword").setAttribute('placeholder', '');
document.getElementById('keyword').focus()
}

//粘贴并搜索
function fin(){
	window.setTimeout(function(){bz();sR();SearchIt();return false;},150);
}

//返回顶部
window.onscroll = function() {scrollFunction()};
function scrollFunction() {
    if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
        document.getElementById("gotop").style.display = "block";
    } else {
        document.getElementById("gotop").style.display = "none";
    }
}
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}

//计时
function two_char(n) {
            return n >= 10 ? n : "0" + n;
        }
var minute=0; 
var hour=0; 
window.setTimeout("interval();",60000); 
function interval() 
{ 
minute++; 
if(minute==60) 
{ 
minute=0;hour+=1; 
} 
document.getElementById("te").innerHTML = "["+hour+"h "+two_char(minute)+"m]"; 
window.setTimeout("interval();",60000); 
} 
</script>

<script type="text/javascript">	
//右侧翻页
window.addEventListener("message", function( event ) {
	var key = event.data;
	if(key=='add'){
		zb();
		var obj = document.getElementsByClassName('heh')[0];
		obj.classList.remove('heh');
		var ID = obj.getAttribute("id");
		var ID_p= ID-1;
		var arr = document.querySelectorAll('#v a:not(.p)');
		for (var i=0; i<arr.length; i++) {
			arr[i].style.backgroundColor = "white";
			arr[i].style.color = "blue";
		}		
		var prevv = document.getElementById(ID_p);		
		prevv.style.backgroundColor = "#e8e8e8";
		prevv.classList.add('heh');		
	}	
	else if(key=='dec'){
		zb();
		var obj = document.getElementsByClassName('heh')[0];
		obj.classList.remove('heh');
		var ID = obj.getAttribute("id");
		var ID_n= Number(ID) + 1;//值数字化
		var arr = document.querySelectorAll('#v a:not(.p)');
		for (var i=0; i<arr.length; i++) {
			arr[i].style.backgroundColor = "white";
			arr[i].style.color = "blue";
		}		
		var nextt = document.getElementById(ID_n);		
		nextt.style.backgroundColor = "#e8e8e8";
		nextt.classList.add('heh');		
	}
	else{
		null
		}
}, false );
</script>

<script type="text/javascript">
//装载数组
    function downloadJSAtOnload() {
        var element = document.createElement("script");
        element.src = "../extra/Re-index/data.js";
        document.body.appendChild(element);
    }
    if (window.addEventListener)
        window.addEventListener("load", downloadJSAtOnload, false);
    else if (window.attachEvent)
        window.attachEvent("onload", downloadJSAtOnload);
    else window.onload = downloadJSAtOnload;
</script>

</body>
</html>